<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Document Preparation Service</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-content {
            padding: 3rem 2rem;
            text-align: center;
        }

        .document-selector {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            border: 2px solid #e9ecef;
        }

        .document-selector h2 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        .dropdown-container {
            margin-bottom: 2rem;
        }

        select {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            background: white;
            cursor: pointer;
        }

        select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .continue-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .continue-btn:hover {
            background: linear-gradient(135deg, #2980b9, #3498db);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .continue-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .form-container {
            display: none;
            padding: 2rem;
        }

        .form-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
        }

        .form-section h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }

        .section-description {
            background: #e8f4f8;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            color: #2c3e50;
            font-style: italic;
            border-left: 4px solid #3498db;
        }

        .notice-section {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .notice-section h4 {
            color: #856404;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .notice-section p {
            color: #856404;
            margin-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .checkbox-group {
            margin-left: 20px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: #f0f8ff;
            border-color: #3498db;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 15px;
            margin-top: 3px;
            transform: scale(1.3);
            cursor: pointer;
        }

        .checkbox-item label {
            cursor: pointer;
            margin-bottom: 0;
            flex: 1;
        }

        .powers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .power-item {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            transition: all 0.3s ease;
        }

        .power-item:hover {
            background: #f8f9fa;
            border-color: #3498db;
        }

        .power-item input[type="checkbox"] {
            margin-right: 10px;
            margin-top: 2px;
            transform: scale(1.2);
        }

        .power-item label {
            margin-bottom: 0;
            cursor: pointer;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .radio-group {
            margin-top: 10px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .radio-item:hover {
            background: #f0f8ff;
            border-color: #3498db;
        }

        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .date-inputs input {
            text-align: center;
        }

        .submit-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 2rem;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3);
        }

        .submit-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .back-btn {
            background: #6c757d;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin-bottom: 2rem;
        }

        .back-btn:hover {
            background: #5a6268;
        }

        .hidden {
            display: none;
        }

        .success-message {
            display: none;
            background: #d4edda;
            color: #155724;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid #c3e6cb;
            text-align: center;
        }

        .error-message {
            display: none;
            background: #f8d7da;
            color: #721c24;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid #f5c6cb;
            text-align: center;
        }

        .loading-message {
            display: none;
            background: #fff3cd;
            color: #856404;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid #ffeaa7;
            text-align: center;
        }

        .special-authority-grid {
            display: grid;
            gap: 15px;
            margin-top: 15px;
        }

        .special-authority-item {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            border: 2px solid #f39c12;
            border-radius: 8px;
            background: #fef9e7;
        }

        .special-authority-item input[type="checkbox"] {
            margin-right: 15px;
            margin-top: 3px;
            transform: scale(1.3);
        }

        .special-authority-item label {
            margin-bottom: 0;
            cursor: pointer;
            font-weight: 600;
            color: #d35400;
        }

        .gifts-section {
            border: 2px solid #e74c3c;
            background: #fdf2f2;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .gifts-section .checkbox-item {
            border: 1px solid #e74c3c;
            background: white;
        }

        .benefits-section {
            background: #f0f8ff;
            border: 2px solid #3498db;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .benefits-section h4 {
            color: #2980b9;
            margin-bottom: 10px;
        }

        .benefits-section p {
            color: #34495e;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 0;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .main-content {
                padding: 2rem 1rem;
            }

            .date-inputs {
                grid-template-columns: 1fr;
            }

            .powers-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Legal Document Preparation</h1>
            <p>Professional Legal Document Drafting Service</p>
        </div>

        <!-- Home Page -->
        <div class="main-content" id="homePage">
            <div class="document-selector">
                <h2>Select Document Type</h2>
                <p style="margin-bottom: 1.5rem; color: #666;">Choose the legal document you need prepared:</p>
                
                <div class="dropdown-container">
                    <select id="documentSelect">
                        <option value="">-- Select a Document --</option>
                        <option value="power-of-attorney">Power of Attorney (Statutory)</option>
                    </select>
                </div>
                
                <button class="continue-btn" id="continueBtn" disabled onclick="loadSelectedDocument()">
                    Continue to Document Preparation
                </button>
            </div>

            <div style="background: #e8f4f8; padding: 1.5rem; border-radius: 8px; margin-top: 2rem;">
                <h3 style="color: #2c3e50; margin-bottom: 1rem;">How It Works</h3>
                <p style="color: #555; line-height: 1.6;">
                    1. Select your document type from the dropdown menu<br>
                    2. Fill out the required information in our guided form<br>
                    3. Submit for professional review and preparation<br>
                    4. Receive your completed document within 1-2 business days
                </p>
            </div>
        </div>

        <!-- Power of Attorney Form -->
        <div class="form-container" id="poaForm">
            <button class="back-btn" onclick="goHome()">‚Üê Back to Document Selection</button>
            
            <!-- Notice Section -->
            <div class="notice-section">
                <h4>NOTICE: STATUTORY POWER OF ATTORNEY</h4>
                <p><strong>THE POWERS GRANTED BY THIS DOCUMENT ARE BROAD AND SWEEPING.</strong> THEY ARE EXPLAINED IN THE DURABLE POWER OF ATTORNEY ACT, SUBTITLE P, TITLE 2, TEXAS ESTATES CODE.</p>
                <p><strong>IF YOU HAVE ANY QUESTIONS ABOUT THESE POWERS, OBTAIN COMPETENT LEGAL ADVICE.</strong></p>
                <p>THIS DOCUMENT DOES NOT AUTHORIZE ANYONE TO MAKE MEDICAL AND OTHER HEALTH-CARE DECISIONS FOR YOU.</p>
                <p>YOU MAY REVOKE THIS POWER OF ATTORNEY IF YOU LATER WISH TO DO SO.</p>
                <p>IF YOU WANT YOUR AGENT TO HAVE THE AUTHORITY TO SIGN HOME EQUITY LOAN DOCUMENTS ON YOUR BEHALF, THIS POWER OF ATTORNEY MUST BE SIGNED BY YOU AT THE OFFICE OF THE LENDER, AN ATTORNEY AT LAW, OR A TITLE COMPANY.</p>
            </div>
            
            <form id="powerOfAttorneyForm">
                <div class="form-section">
                    <h3>Principal Information</h3>
                    <div class="form-group">
                        <label for="testatorName">Full Legal Name of Principal *</label>
                        <input type="text" id="testatorName" name="testatorName" required>
                    </div>
                    <div class="form-group">
                        <label for="clientEmail">Email Address *</label>
                        <input type="email" id="clientEmail" name="clientEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="clientPhone">Phone Number</label>
                        <input type="tel" id="clientPhone" name="clientPhone">
                    </div>
                </div>

                <div class="form-section">
                    <h3>Agent Information</h3>
                    <div class="form-group">
                        <label for="primaryAgent">Primary Agent (Full Name) *</label>
                        <input type="text" id="primaryAgent" name="primaryAgent" required>
                    </div>
                    
                    <div class="checkbox-item">
                        <input type="checkbox" id="wantSecondAgent" onchange="toggleSecondAgent()">
                        <label for="wantSecondAgent">I want to name a first alternate agent</label>
                    </div>
                    
                    <div class="checkbox-group hidden" id="secondAgentSection">
                        <div class="form-group">
                            <label for="secondAgent">First Alternate Agent (Full Name)</label>
                            <input type="text" id="secondAgent" name="secondAgent">
                        </div>
                        
                        <div class="checkbox-item">
                            <input type="checkbox" id="wantThirdAgent" onchange="toggleThirdAgent()">
                            <label for="wantThirdAgent">I want to name a second alternate agent</label>
                        </div>
                        
                        <div class="checkbox-group hidden" id="thirdAgentSection">
                            <div class="form-group">
                                <label for="thirdAgent">Second Alternate Agent (Full Name)</label>
                                <input type="text" id="thirdAgent" name="thirdAgent">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Powers Granted to Agent</h3>
                    <div class="section-description">
                        <strong>Instructions:</strong> To grant ALL powers, check only option (O) below and ignore options (A) through (N). To grant specific powers, check only the individual powers you want to grant. To withhold a power, simply leave it unchecked.
                    </div>
                    
                    <div class="powers-grid">
                        <div class="power-item">
                            <input type="checkbox" id="powerA" name="powers" value="A">
                            <label for="powerA">(A) Real property transactions</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerB" name="powers" value="B">
                            <label for="powerB">(B) Tangible personal property transactions</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerC" name="powers" value="C">
                            <label for="powerC">(C) Stock and bond transactions</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerD" name="powers" value="D">
                            <label for="powerD">(D) Commodity and option transactions</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerE" name="powers" value="E">
                            <label for="powerE">(E) Banking and other financial institution transactions</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerF" name="powers" value="F">
                            <label for="powerF">(F) Business operating transactions</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerG" name="powers" value="G">
                            <label for="powerG">(G) Insurance and annuity transactions</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerH" name="powers" value="H">
                            <label for="powerH">(H) Estate, trust, and other beneficiary transactions</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerI" name="powers" value="I">
                            <label for="powerI">(I) Claims and litigation</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerJ" name="powers" value="J">
                            <label for="powerJ">(J) Personal and family maintenance</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerK" name="powers" value="K">
                            <label for="powerK">(K) Benefits from social security, Medicare, Medicaid, or other governmental programs or civil or military service</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerL" name="powers" value="L">
                            <label for="powerL">(L) Retirement plan transactions</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerM" name="powers" value="M">
                            <label for="powerM">(M) Tax matters</label>
                        </div>
                        <div class="power-item">
                            <input type="checkbox" id="powerN" name="powers" value="N">
                            <label for="powerN">(N) Digital assets and the content of an electronic communication</label>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 8px; border: 2px solid #27ae60;">
                        <div class="power-item" style="background: #f8fff8; border: 2px solid #27ae60;">
                            <input type="checkbox" id="powerO" name="powers" value="O" onchange="handleAllPowersChange()">
                            <label for="powerO" style="font-weight: bold; color: #27ae60;">(O) ALL OF THE POWERS LISTED IN (A) THROUGH (N)</label>
                        </div>
                        <p style="margin-top: 10px; font-size: 0.9rem; color: #27ae60;"><strong>Note:</strong> You do not need to check any other powers if you check option (O).</p>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Grant of Specific Authority</h3>
                    <div class="section-description">
                        <strong>CAUTION:</strong> Granting any of the following will give your agent the authority to take actions that could significantly reduce your property or change how your property is distributed at your death. Check ONLY the specific authority you WANT to give your agent.
                    </div>
                    
                    <div class="special-authority-grid">
                        <div class="special-authority-item">
                            <input type="checkbox" id="specificA" name="specificAuthority" value="trust">
                            <label for="specificA">Create, amend, revoke, or terminate an inter vivos trust</label>
                        </div>
                        <div class="special-authority-item">
                            <input type="checkbox" id="specificB" name="specificAuthority" value="survivorship">
                            <label for="specificB">Create or change rights of survivorship</label>
                        </div>
                        <div class="special-authority-item">
                            <input type="checkbox" id="specificC" name="specificAuthority" value="beneficiary">
                            <label for="specificC">Create or change a beneficiary designation</label>
                        </div>
                        <div class="special-authority-item">
                            <input type="checkbox" id="specificD" name="specificAuthority" value="authorize">
                            <label for="specificD">Authorize another person to exercise the authority granted under this power of attorney</label>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Special Instructions</h3>
                    
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">Agent Compensation</h4>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="compReasonable" name="compensation" value="reasonable">
                            <label for="compReasonable">My agent is entitled to reimbursement of reasonable expenses incurred on my behalf and to compensation that is reasonable under the circumstances.</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="compNone" name="compensation" value="none">
                            <label for="compNone">My agent is entitled to reimbursement of reasonable expenses incurred on my behalf but shall receive no compensation for serving as my agent.</label>
                        </div>
                    </div>

                    <h4 style="color: #2c3e50; margin: 25px 0 15px 0;">Co-Agents (if applicable)</h4>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="coAgentIndependent" name="coAgents" value="independent">
                            <label for="coAgentIndependent">Each of my co-agents may act independently for me.</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="coAgentJoint" name="coAgents" value="joint">
                            <label for="coAgentJoint">My co-agents may act for me only if the co-agents act jointly.</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="coAgentMajority" name="coAgents" value="majority">
                            <label for="coAgentMajority">My co-agents may act for me only if a majority of the co-agents act jointly.</label>
                        </div>
                    </div>

                    <div class="gifts-section">
                        <h4 style="color: #e74c3c; margin-bottom: 15px;">Gift-Making Authority</h4>
                        <div class="checkbox-item">
                            <input type="checkbox" id="giftPower" name="gifts" value="annual">
                            <label for="giftPower">I grant my agent the power to apply my property to make gifts outright to or for the benefit of a person, including by the exercise of a presently exercisable general power of appointment held by me, except that the amount of a gift to an individual may not exceed the amount of annual exclusions allowed from the federal gift tax for the calendar year of the gift.</label>
                        </div>
                    </div>

                    <div class="benefits-section">
                        <h4>Gifts to Qualify for Public Benefits</h4>
                        <p>If my agent in my agent's sole discretion has determined that I need nursing home or other long-term medical care and that I will receive proper medical care whether I privately pay for such care or if I am a recipient of Title XIX (Medicaid) or other public benefits, then my agent shall have the power: (i) to take any and all steps necessary, in my agent's judgment, to obtain and maintain my eligibility for any and all public benefits and entitlement programs, including, if necessary, signing a deed with a retained life estate (also known as a "Lady Bird Deed") as well as creating and funding a qualified income trust or special needs trust for me or a disabled child, if any; (ii) to transfer with or without consideration my assets to my descendants (if any), or to my natural heirs at law or to the persons named as beneficiaries under my last will and testament or a revocable living trust which I may have established, including my agent; and (iii) to enter into a personal services contract for my benefit, including entering into such contract with my agent, and even if doing so may be considered self-dealing. Such public benefits and entitlement programs shall include, but are not limited to, Social Security, Supplemental Security Income, Medicare, Medicaid and Veterans benefits.</p>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Document Execution Details</h3>
                    <div class="section-description">
                        üìÖ <strong>Important:</strong> The date below should be the date when the document will be signed (executed). The location should be where the signing will take place.
                    </div>
                    
                    <div class="form-group">
                        <label>Date the Document Will Be Signed *</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="exactDate" name="dateChoice" value="exact" onchange="toggleDateInput()">
                                <label for="exactDate">I know the exact signing date</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="blankDate" name="dateChoice" value="blank" onchange="toggleDateInput()">
                                <label for="blankDate">I want to leave blanks for the date (to be filled in when signed)</label>
                            </div>
                        </div>
                        
                        <div id="exactDateSection" class="hidden" style="margin-top: 15px;">
                            <label for="executionDate">Enter Signing Date (Format: June 19, 2025)</label>
                            <input type="text" id="executionDate" name="executionDate">
                        </div>
                        
                        <div id="blankDateSection" class="hidden" style="margin-top: 15px;">
                            <p style="color: #666; margin-bottom: 10px;">Enter what you know (you can change the month and year, or leave day blank):</p>
                            <div class="date-inputs">
                                <div>
                                    <label for="executionMonth">Month</label>
                                    <input type="text" id="executionMonth" name="executionMonth">
                                </div>
                                <div>
                                    <label for="executionDay">Day</label>
                                    <input type="text" id="executionDay" name="executionDay" placeholder="Leave blank if unknown">
                                </div>
                                <div>
                                    <label for="executionYear">Year</label>
                                    <input type="text" id="executionYear" name="executionYear">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="executionCity">City Where Document Will Be Signed *</label>
                        <input type="text" id="executionCity" name="executionCity" required>
                    </div>
                    <div class="form-group">RetryDHContinueEdithtml                       <label for="executionState">State Where Document Will Be Signed *</label>
                       <input type="text" id="executionState" name="executionState" required>
                   </div>
                   <div class="form-group">
                       <label for="executionCounty">County Where Document Will Be Signed *</label>
                       <input type="text" id="executionCounty" name="executionCounty" required>
                   </div>
               </div>

               <div class="form-section">
                   <h3>Additional Notes</h3>
                   <div class="form-group">
                       <label for="additionalNotes">Special Instructions or Comments</label>
                       <textarea id="additionalNotes" name="additionalNotes" rows="4"></textarea>
                   </div>
               </div>

               <button type="submit" class="submit-btn">
                   Submit for Review
               </button>

               <div class="loading-message" id="loadingMessage">
                   <h4>Sending...</h4>
                   <p>Please wait while we process your request.</p>
               </div>

               <div class="success-message" id="successMessage">
                   <h4>‚úÖ Success!</h4>
                   <p>Your Power of Attorney request has been sent successfully to don.r.hancock@gmail.com.<br>
                   You can expect a response within 1-2 business days.</p>
               </div>

               <div class="error-message" id="errorMessage">
                   <h4>‚ùå Error</h4>
                   <p>There was an error sending your request. Please check your information and try again.</p>
               </div>
           </form>
       </div>
   </div>

   <script>
       // Get current date info for default values
       const currentDate = new Date();
       const currentMonth = currentDate.toLocaleString('default', { month: 'long' });
       const currentYear = currentDate.getFullYear();

       // Enable continue button when document is selected
       document.getElementById('documentSelect').addEventListener('change', function() {
           const continueBtn = document.getElementById('continueBtn');
           continueBtn.disabled = this.value === '';
       });

       // Load selected document form
       function loadSelectedDocument() {
           const selectedDoc = document.getElementById('documentSelect').value;
           const homePage = document.getElementById('homePage');
           
           if (selectedDoc === 'power-of-attorney') {
               homePage.style.display = 'none';
               document.getElementById('poaForm').style.display = 'block';
           }
       }

       // Go back to home page
       function goHome() {
           document.getElementById('homePage').style.display = 'block';
           document.getElementById('poaForm').style.display = 'none';
           // Reset form completely
           document.getElementById('powerOfAttorneyForm').reset();
           // Hide agent sections
           document.getElementById('secondAgentSection').classList.add('hidden');
           document.getElementById('thirdAgentSection').classList.add('hidden');
           // Hide date sections
           document.getElementById('exactDateSection').classList.add('hidden');
           document.getElementById('blankDateSection').classList.add('hidden');
           // Hide messages
           document.getElementById('successMessage').style.display = 'none';
           document.getElementById('errorMessage').style.display = 'none';
           document.getElementById('loadingMessage').style.display = 'none';
       }

       // Handle "All Powers" checkbox logic
       function handleAllPowersChange() {
           const allPowersCheckbox = document.getElementById('powerO');
           const individualPowerCheckboxes = document.querySelectorAll('input[name="powers"][value!="O"]');
           
           if (allPowersCheckbox.checked) {
               // Uncheck all individual powers when "All Powers" is selected
               individualPowerCheckboxes.forEach(checkbox => {
                   checkbox.checked = false;
                   checkbox.disabled = true;
               });
           } else {
               // Re-enable individual powers when "All Powers" is unchecked
               individualPowerCheckboxes.forEach(checkbox => {
                   checkbox.disabled = false;
               });
           }
       }

       // Toggle date input options
       function toggleDateInput() {
           const exactDate = document.getElementById('exactDate').checked;
           const blankDate = document.getElementById('blankDate').checked;
           const exactSection = document.getElementById('exactDateSection');
           const blankSection = document.getElementById('blankDateSection');
           
           if (exactDate) {
               exactSection.classList.remove('hidden');
               blankSection.classList.add('hidden');
               // Clear blank date fields
               document.getElementById('executionMonth').value = '';
               document.getElementById('executionDay').value = '';
               document.getElementById('executionYear').value = '';
           } else if (blankDate) {
               blankSection.classList.remove('hidden');
               exactSection.classList.add('hidden');
               // Clear exact date field
               document.getElementById('executionDate').value = '';
               // Prepopulate month and year for blank date option
               document.getElementById('executionMonth').value = currentMonth;
               document.getElementById('executionYear').value = currentYear;
               document.getElementById('executionDay').value = ''; // Leave day blank
           } else {
               exactSection.classList.add('hidden');
               blankSection.classList.add('hidden');
           }
       }

       // Toggle second agent section
       function toggleSecondAgent() {
           const checkbox = document.getElementById('wantSecondAgent');
           const section = document.getElementById('secondAgentSection');
           
           if (checkbox.checked) {
               section.classList.remove('hidden');
           } else {
               section.classList.add('hidden');
               // Also hide third agent and uncheck
               document.getElementById('wantThirdAgent').checked = false;
               document.getElementById('thirdAgentSection').classList.add('hidden');
               // Clear the inputs
               document.getElementById('secondAgent').value = '';
               document.getElementById('thirdAgent').value = '';
           }
       }

       // Toggle third agent section
       function toggleThirdAgent() {
           const checkbox = document.getElementById('wantThirdAgent');
           const section = document.getElementById('thirdAgentSection');
           
           if (checkbox.checked) {
               section.classList.remove('hidden');
           } else {
               section.classList.add('hidden');
               document.getElementById('thirdAgent').value = '';
           }
       }

       // Handle form submission
       document.getElementById('powerOfAttorneyForm').addEventListener('submit', async function(e) {
           e.preventDefault();
           
           const submitBtn = this.querySelector('.submit-btn');
           const loadingMessage = document.getElementById('loadingMessage');
           const successMessage = document.getElementById('successMessage');
           const errorMessage = document.getElementById('errorMessage');
           
           // Hide previous messages
           successMessage.style.display = 'none';
           errorMessage.style.display = 'none';
           loadingMessage.style.display = 'block';
           
           // Show loading state
           submitBtn.disabled = true;
           submitBtn.textContent = 'Sending...';
           
           try {
               const formData = new FormData(this);
               const data = {};
               
               // Process form data properly
               for (let [key, value] of formData.entries()) {
                   if (data[key]) {
                       // Handle multiple values (like powers and specificAuthority)
                       if (Array.isArray(data[key])) {
                           data[key].push(value);
                       } else {
                           data[key] = [data[key], value];
                       }
                   } else {
                       data[key] = value;
                   }
               }

               // Get all checked powers
               const checkedPowers = [];
               document.querySelectorAll('input[name="powers"]:checked').forEach(checkbox => {
                   checkedPowers.push(checkbox.value);
               });
               data.powers = checkedPowers;

               // Get all checked specific authorities
               const checkedSpecific = [];
               document.querySelectorAll('input[name="specificAuthority"]:checked').forEach(checkbox => {
                   checkedSpecific.push(checkbox.value);
               });
               data.specificAuthority = checkedSpecific;

               // Get all checked gifts
               const checkedGifts = [];
               document.querySelectorAll('input[name="gifts"]:checked').forEach(checkbox => {
                   checkedGifts.push(checkbox.value);
               });
               data.gifts = checkedGifts;
               
               // Handle date formatting
               if (data.dateChoice === 'exact' && data.executionDate) {
                   // Keep the exact date as entered
               } else if (data.dateChoice === 'blank') {
                   // Format the partial date
                   const month = data.executionMonth || '______';
                   const day = data.executionDay || '___';
                   const year = data.executionYear || '____';
                   data.executionDate = `${month} ${day}, ${year}`;
               } else {
                   // If no date choice is made, require it
                   throw new Error('Please select a date option');
               }
               
               // Ensure required fields are present
               if (!data.testatorName || !data.clientEmail || !data.primaryAgent || 
                   !data.executionCity || !data.executionState || !data.executionCounty) {
                   throw new Error('Please fill in all required fields');
               }
               
               // Ensure we have empty strings for optional fields if not provided
               data.secondAgent = data.secondAgent || '';
               data.thirdAgent = data.thirdAgent || '';
               data.clientPhone = data.clientPhone || '';
               data.additionalNotes = data.additionalNotes || '';
               data.compensation = data.compensation || '';
               data.coAgents = data.coAgents || '';
               
               console.log('Sending data:', data); // Debug logging
               
               const response = await fetch('/submit', {
                   method: 'POST',
                   headers: {
                       'Content-Type': 'application/json',
                   },
                   body: JSON.stringify(data)
               });
               
               console.log('Response status:', response.status); // Debug logging
               
               const result = await response.json();
               console.log('Result:', result); // Debug logging
               
               loadingMessage.style.display = 'none';
               
               if (result.success) {
                   successMessage.style.display = 'block';
                   this.reset();
                   // Reset checkboxes and sections
                   document.getElementById('wantSecondAgent').checked = false;
                   document.getElementById('wantThirdAgent').checked = false;
                   document.getElementById('secondAgentSection').classList.add('hidden');
                   document.getElementById('thirdAgentSection').classList.add('hidden');
                   document.getElementById('exactDateSection').classList.add('hidden');
                   document.getElementById('blankDateSection').classList.add('hidden');
                   // Re-enable individual power checkboxes
                   document.querySelectorAll('input[name="powers"][value!="O"]').forEach(checkbox => {
                       checkbox.disabled = false;
                   });
               } else {
                   throw new Error(result.message || 'Submission failed');
               }
               
           } catch (error) {
               console.error('Error:', error);
               loadingMessage.style.display = 'none';
               errorMessage.style.display = 'block';
               
               // Show more specific error message
               const errorP = errorMessage.querySelector('p');
               errorP.textContent = error.message || 'There was an error sending your request. Please check your information and try again.';
           } finally {
               // Reset button state
               submitBtn.disabled = false;
               submitBtn.textContent = 'Submit for Review';
           }
       });

       // Add event listeners to individual power checkboxes to uncheck "All Powers" if any individual power is selected
       document.querySelectorAll('input[name="powers"][value!="O"]').forEach(checkbox => {
           checkbox.addEventListener('change', function() {
               if (this.checked) {
                   document.getElementById('powerO').checked = false;
                   // Re-enable all individual checkboxes
                   document.querySelectorAll('input[name="powers"][value!="O"]').forEach(cb => {
                       cb.disabled = false;
                   });
               }
           });
       });
   </script>
</body>
</html>
