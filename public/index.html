<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Document Preparation Service</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-content {
            padding: 3rem 2rem;
            text-align: center;
        }

        .document-selector {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            border: 2px solid #e9ecef;
        }

        .document-selector h2 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        .dropdown-container {
            margin-bottom: 2rem;
        }

        select {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            background: white;
            cursor: pointer;
        }

        select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .continue-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .continue-btn:hover {
            background: linear-gradient(135deg, #2980b9, #3498db);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .continue-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .form-container {
            display: none;
            padding: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .form-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
        }

        .form-section h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }

        .section-description {
            background: #e8f4f8;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            color: #2c3e50;
            font-style: italic;
            border-left: 4px solid #3498db;
        }

        .notice-section {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .notice-section h4 {
            color: #856404;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .notice-section p {
            color: #856404;
            margin-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .checkbox-group {
            margin-left: 20px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: #f0f8ff;
            border-color: #3498db;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 15px;
            margin-top: 3px;
            transform: scale(1.3);
            cursor: pointer;
        }

        .checkbox-item label {
            cursor: pointer;
            margin-bottom: 0;
            flex: 1;
        }

        /* Styles for blank lines approach */
        .power-line {
            display: flex;
            align-items: flex-start;
            padding: 8px 12px;
            margin-bottom: 6px;
            background: white;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }

        .initial-line {
            display: inline-block;
            width: 60px;
            border-bottom: 1px solid #333;
            margin-right: 12px;
            margin-top: 2px;
            font-family: monospace;
            text-align: center;
            font-size: 0.9rem;
        }

        .authority-line {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            margin-bottom: 8px;
            background: #fef9e7;
            border-radius: 6px;
            border: 2px solid #f39c12;
        }

        .authority-line .initial-line {
            width: 70px;
            border-bottom: 2px solid #d35400;
            margin-right: 15px;
        }

        .authority-line label {
            font-weight: 600;
            color: #d35400;
            margin-bottom: 0;
        }

        .instruction-line {
            display: flex;
            align-items: flex-start;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: white;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        .gift-line {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            background: #fdf2f2;
            border-radius: 6px;
            border: 2px solid #e74c3c;
            margin-bottom: 10px;
        }

        .gift-line .initial-line {
            border-bottom: 2px solid #e74c3c;
            width: 70px;
        }

        input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .radio-group {
            margin-top: 10px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .radio-item:hover {
            background: #f0f8ff;
            border-color: #3498db;
        }

        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .date-inputs input {
            text-align: center;
        }

        .submit-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 2rem;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3);
        }

        .submit-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .back-btn {
            background: #6c757d;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin-bottom: 2rem;
        }

        .back-btn:hover {
            background: #5a6268;
        }

        .hidden {
            display: none;
        }

        .success-message {
            display: none;
            background: #d4edda;
            color: #155724;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid #c3e6cb;
            text-align: center;
        }

        .error-message {
            display: none;
            background: #f8d7da;
            color: #721c24;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid #f5c6cb;
            text-align: center;
        }

        .loading-message {
            display: none;
            background: #fff3cd;
            color: #856404;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid #ffeaa7;
            text-align: center;
        }

        .benefits-section {
            background: #f0f8ff;
            border: 2px solid #3498db;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .benefits-section h4 {
            color: #2980b9;
            margin-bottom: 10px;
        }

        .benefits-section p {
            color: #34495e;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 0;
        }

        .limitations-section {
            background: #f8f9fa;
            border: 2px solid #6c757d;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .limitations-section h4 {
            color: #495057;
            margin-bottom: 10px;
        }

        .additional-powers-section {
            background: #e7f3ff;
            border: 2px solid #007bff;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .additional-powers-section h4 {
            color: #0056b3;
            margin-bottom: 10px;
        }

        .effectiveness-section {
            background: #fff5f5;
            border: 2px solid #dc3545;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .effectiveness-section h4 {
            color: #721c24;
            margin-bottom: 10px;
        }

        .strikethrough {
            text-decoration: line-through;
            color: #6c757d;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .main-content {
                padding: 2rem 1rem;
            }

            .date-inputs {
                grid-template-columns: 1fr;
            }

            .form-container {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Legal Document Preparation</h1>
            <p>Professional Legal Document Drafting Service</p>
        </div>

        <!-- Home Page -->
        <div class="main-content" id="homePage">
            <div class="document-selector">
                <h2>Select Document Type</h2>
                <p style="margin-bottom: 1.5rem; color: #666;">Choose the legal document you need prepared:</p>
                
                <div class="dropdown-container">
                    <select id="documentSelect">
                        <option value="">-- Select a Document --</option>
                        <option value="power-of-attorney">Power of Attorney (Statutory)</option>
                    </select>
                </div>
                
                <button class="continue-btn" id="continueBtn" disabled onclick="loadSelectedDocument()">
                    Continue to Document Preparation
                </button>
            </div>

            <div style="background: #e8f4f8; padding: 1.5rem; border-radius: 8px; margin-top: 2rem;">
                <h3 style="color: #2c3e50; margin-bottom: 1rem;">How It Works</h3>
                <p style="color: #555; line-height: 1.6;">
                    1. Select your document type from the dropdown menu<br>
                    2. Fill out the required information in our guided form<br>
                    3. Submit for professional review and preparation<br>
                    4. Receive your completed document within 1-2 business days
                </p>
            </div>
        </div>

        <!-- Power of Attorney Form -->
        <div class="form-container" id="poaForm">
            <button class="back-btn" onclick="goHome()">‚Üê Back to Document Selection</button>
            
            <!-- Notice Section -->
           <div class="notice-section">
    <h4><strong>NOTICE: THE POWERS GRANTED BY THIS DOCUMENT ARE BROAD AND SWEEPING. THEY ARE EXPLAINED IN THE DURABLE POWER OF ATTORNEY ACT, SUBTITLE P, TITLE 2, TEXAS ESTATES CODE. IF YOU HAVE ANY QUESTIONS ABOUT THESE POWERS, OBTAIN COMPETENT LEGAL ADVICE. THIS DOCUMENT DOES NOT AUTHORIZE ANYONE TO MAKE MEDICAL AND OTHER HEALTH-CARE DECISIONS FOR YOU. YOU MAY REVOKE THIS POWER OF ATTORNEY IF YOU LATER WISH TO DO SO. IF YOU WANT YOUR AGENT TO HAVE THE AUTHORITY TO SIGN HOME EQUITY LOAN DOCUMENTS ON YOUR BEHALF, THIS POWER OF ATTORNEY MUST BE SIGNED BY YOU AT THE OFFICE OF THE LENDER, AN ATTORNEY AT LAW, OR A TITLE COMPANY.</strong></h4>

    <p style="margin-top: 20px;">You should select someone you trust to serve as your agent. Unless you specify otherwise, generally the agent's authority will continue until:</p>
    <p>(1) you die or revoke the power of attorney;</p>
    <p>(2) your agent resigns, is removed by court order, or is unable to act for you; or</p>
    <p>(3) a guardian is appointed for your estate.</p>

    <p style="margin-top: 20px;">I, ¬´partyFullName-t[idTestatorName-c]¬ª, appoint ¬´partyFullName-t[idPOA1-c]¬ª as my agent to act for me in any lawful way with respect to all of the following powers that I have initialed below. (YOU MAY APPOINT CO-AGENTS. UNLESS YOU PROVIDE OTHERWISE, CO-AGENTS MAY ACT INDEPENDENTLY.)</p>

    <p style="margin-top: 15px;">If I am married to an agent, and my marriage is dissolved, terminated or voided, the authority of that agent under this power of attorney shall also terminate when my marriage terminates, unless I have provided otherwise in this document.</p>

    <p style="margin-top: 15px;"><strong>TO GRANT ALL OF THE FOLLOWING POWERS, INITIAL THE LINE IN FRONT OF (O) AND IGNORE THE LINES IN FRONT OF THE OTHER POWERS LISTED IN (A) THROUGH (N).</strong></p>

    <p><strong>TO GRANT A POWER, YOU MUST INITIAL THE LINE IN FRONT OF THE POWER YOU ARE GRANTING.</strong></p>

    <p><strong>TO WITHHOLD A POWER, DO NOT INITIAL THE LINE IN FRONT OF THE POWER. YOU MAY, BUT DO NOT NEED TO, CROSS OUT EACH POWER WITHHELD.</strong></p>
</div>
            
            <form id="powerOfAttorneyForm">
                <div class="form-section">
                    <h3>Principal Information</h3>
                    <div class="form-group">
                        <label for="testatorName">Full Legal Name of Principal *</label>
                        <input type="text" id="testatorName" name="testatorName" required>
                    </div>
                    <div class="form-group">
                        <label for="clientEmail">Email Address *</label>
                        <input type="email" id="clientEmail" name="clientEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="clientPhone">Phone Number</label>
                        <input type="tel" id="clientPhone" name="clientPhone">
                    </div>
                </div>

                <div class="form-section">
                    <h3>Agent Information</h3>
                    <div class="form-group">
                        <label for="primaryAgent">Primary Agent (Full Name) *</label>
                       <input type="text" id="primaryAgent" name="primaryAgent" required autocomplete="off">
                    </div>
                    
                    <div class="checkbox-item">
                        <input type="checkbox" id="wantSecondAgent" onchange="toggleSecondAgent()">
                        <label for="wantSecondAgent">I want to name a first alternate agent</label>
                    </div>
                    
                    <div class="checkbox-group hidden" id="secondAgentSection">
                        <div class="form-group">
                            <label for="secondAgent">First Alternate Agent (Full Name)</label>
                            <input type="text" id="secondAgent" name="secondAgent">
                        </div>
                        
                        <div class="checkbox-item">
                            <input type="checkbox" id="wantThirdAgent" onchange="toggleThirdAgent()">
                            <label for="wantThirdAgent">I want to name a second alternate agent</label>
                        </div>
                        
                        <div class="checkbox-group hidden" id="thirdAgentSection">
                            <div class="form-group">
                                <label for="thirdAgent">Second Alternate Agent (Full Name)</label>
                                <input type="text" id="thirdAgent" name="thirdAgent">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-section">
                    <h3>Powers Granted to Agent</h3>
                    <div class="section-description">
                        <strong>Instructions:</strong> The lines below show exactly how your final document will appear. You will initial next to your chosen powers when you sign the document. TO GRANT ALL POWERS, initial only line (O) and ignore lines (A) through (N). TO GRANT SPECIFIC POWERS, initial only the individual powers you want to grant. TO WITHHOLD A POWER, do not initial the line (you may cross it out if desired).
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #ddd;">
                        <p style="margin-bottom: 15px; font-weight: bold;">TO GRANT ALL OF THE FOLLOWING POWERS, INITIAL THE LINE IN FRONT OF (O) AND IGNORE THE LINES IN FRONT OF THE OTHER POWERS LISTED IN (A) THROUGH (N).</p>
                        <p style="margin-bottom: 15px; font-weight: bold;">TO GRANT A POWER, YOU MUST INITIAL THE LINE IN FRONT OF THE POWER YOU ARE GRANTING.</p>
                        <p style="margin-bottom: 20px; font-weight: bold;">TO WITHHOLD A POWER, DO NOT INITIAL THE LINE IN FRONT OF THE POWER. YOU MAY, BUT DO NOT NEED TO, CROSS OUT EACH POWER WITHHELD.</p>
                        
                        <div class="power-line">
                            <span class="initial-line">_____</span> (A) Real property transactions;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (B) Tangible personal property transactions;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (C) Stock and bond transactions;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (D) Commodity and option transactions;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (E) Banking and other financial institution transactions;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (F) Business operating transactions;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (G) Insurance and annuity transactions;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (H) Estate, trust, and other beneficiary transactions;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (I) Claims and litigation;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (J) Personal and family maintenance;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (K) Benefits from social security, Medicare, Medicaid, or other governmental programs or civil or military service;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (L) Retirement plan transactions;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (M) Tax matters;
                        </div>
                        <div class="power-line">
                            <span class="initial-line">_____</span> (N) Digital assets and the content of an electronic communication
                        </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 8px; border: 2px solid #27ae60;">
                            <div class="power-line" style="background: #f8fff8; border: 2px solid #27ae60; padding: 12px;">
                                <span class="initial-line" style="border-bottom: 2px solid #27ae60;">_____</span> 
                                <strong style="color: #27ae60;">(O) ALL OF THE POWERS LISTED IN (A) THROUGH (N).</strong>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem; color: #27ae60;"><strong>YOU DO NOT HAVE TO INITIAL THE LINE IN FRONT OF ANY OTHER POWER IF YOU INITIAL LINE (O).</strong></p>
                        </div>
                    </div>
                </div>

               <div class="form-section">
                    <h3><strong>GRANT OF SPECIFIC AUTHORITY</strong></h3>
                    
                    <p style="margin-bottom: 15px;">My agent MAY NOT do any of the following specific acts for me UNLESS I have INITIALED the specific authority listed below:</p>
                    
                    <p style="margin-bottom: 15px;">(CAUTION: Granting any of the following will give your agent the authority to take actions that could significantly reduce your property or change how your property is distributed at your death. INITIAL ONLY the specific authority you WANT to give your agent. If you DO NOT want to grant your agent one or more of the following powers, you may also CROSS OUT a power you DO NOT want to grant.)</p>
                    
                    <div style="background: #fef9e7; padding: 20px; border-radius: 8px; border: 2px solid #f39c12;">
                        <div class="authority-line">
                            <span class="initial-line">________</span>
                            <label>Create, amend, revoke, or terminate an inter vivos trust</label>
                        </div>
                        <div class="authority-line">
                            <span class="initial-line">________</span>
                            <label>Create or change rights of survivorship</label>
                        </div>
                        <div class="authority-line">
                            <span class="initial-line">________</span>
                            <label>Create or change a beneficiary designation</label>
                        </div>
                        <div class="authority-line">
                            <span class="initial-line">________</span>
                            <label>Authorize another person to exercise the authority granted under this power of attorney</label>
                        </div>
                    </div>
                </div>

               <div class="form-section">
                    <h3><strong>SPECIAL INSTRUCTIONS:</strong></h3>
                    
                    <p style="margin-bottom: 15px;"><strong>COMPENSATION:</strong> Special instructions applicable to agent compensation (initial in front of one of the following sentences to have it apply; if no selection is made, each agent will be entitled to compensation that is reasonable under the circumstances):</p>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
                        <div class="instruction-line">
                            <span class="initial-line">_______</span>
                            <span>My agent is entitled to reimbursement of reasonable expenses incurred on my behalf and to compensation that is reasonable under the circumstances.</span>
                        </div>
                        <div class="instruction-line">
                            <span class="initial-line">_______</span>
                            <span>My agent is entitled to reimbursement of reasonable expenses incurred on my behalf but shall receive no compensation for serving as my agent.</span>
                        </div>
                    </div>

                    <p style="margin: 25px 0 15px 0;"><strong>CO-AGENTS:</strong> Special instructions applicable to co-agents (If you have appointed co-agents to act, initial in front of one of the following sentences to have it apply; If no selection is made, each agent will be entitled to act independently):</p>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
                        <div class="instruction-line">
                            <span class="initial-line">_______</span>
                            <span>Each of my co-agents may act independently for me.</span>
                        </div>
                        <div class="instruction-line">
                            <span class="initial-line">_______</span>
                            <span>My co-agents may act for me only if the co-agents act jointly.</span>
                        </div>
                        <div class="instruction-line">
                            <span class="initial-line">_______</span>
                            <span>My co-agents may act for me only if a majority of the co-agents act jointly.</span>
                        </div>
                    </div>

                    <p style="margin: 25px 0 15px 0;"><strong>GIFTS:</strong> Special instructions applicable to gifts (initial in front of the following sentence to have it apply):</p>
                    
                    <div style="background: #fdf2f2; padding: 15px; border-radius: 8px; border: 2px solid #e74c3c;">
                        <div class="gift-line">
                            <span class="initial-line">_______</span>
                            <span>I grant my agent the power to apply my property to make gifts outright to or for the benefit of a person, including by the exercise of a presently exercisable general power of appointment held by me, except that the amount of a gift to an individual may not exceed the amount of annual exclusions allowed from the federal gift tax for the calendar year of the gift.</span>
                        </div>
                    </div>

                    <p style="margin: 25px 0 15px 0;"><strong>GIFTS TO QUALIFY FOR PUBLIC BENEFITS:</strong> If my agent in my agent's sole discretion has determined that I need nursing home or other long-term medical care and that I will receive proper medical care whether I privately pay for such care or if I am a recipient of Title XIX (Medicaid) or other public benefits, then my agent shall have the power: (i) to take any and all steps necessary, in my agent's judgment, to obtain and maintain my eligibility for any and all public benefits and entitlement programs, including, if necessary, signing a deed with a retained life estate (also known as a "Lady Bird Deed") as well as creating and funding a qualified income trust or special needs trust for me or a disabled child, if any; (ii) to transfer with or without consideration my assets to my descendants (if any), or to my natural heirs at law or to the persons named as beneficiaries under my last will and testament or a revocable living trust which I may have established, including my agent; and (iii) to enter into a personal services contract for my benefit, including entering into such contract with my agent, and even if doing so may be considered self-dealing. Such public benefits and entitlement programs shall include, but are not limited to, Social Security, Supplemental Security Income, Medicare, Medicaid and Veterans benefits.</p>
                    </div>
                </div>

                <div class="form-section">
                    <div class="limitations-section">
                        <h4><strong>LIMITATIONS</strong></h4>
                        <p>Notwithstanding any provision herein to the contrary, any authority granted to my agent shall be limited so as to prevent this power of attorney from causing my agent to be taxed on my income (unless my agent is my spouse) and from causing my assets to be subject to a general power of appointment by my agent, as that term is defined in Section 2041 of the Internal Revenue Code of 1986, as amended.</p>
                    </div>
                </div>

                <div class="form-section">
                    <div class="additional-powers-section">
                        <h4><strong>ADDITIONAL POWERS</strong></h4>
                        <p style="margin-bottom: 15px;"><strong>ON THE FOLLOWING LINES YOU MAY GIVE SPECIAL INSTRUCTIONS LIMITING OR EXTENDING THE POWERS GRANTED TO YOUR AGENT.</strong></p>
                        <p style="margin-bottom: 15px;">In addition to the powers granted above, I grant to my agent the following powers:</p>
                        
                        <p style="margin-bottom: 10px;"><strong>Power to Appoint Substitute Agent.</strong> The power to appoint or substitute one or more agents to serve as my agent under this power of attorney; provided, however, such power shall be exercisable only by the then-serving agent (or if more than one agent is serving, by all such co-agents acting unanimously), and any such appointment or substitution shall override other provisions contained herein which may attempt to name one or more successor agents. Any such appointment or substitution may be revoked by me or my agent at any time and for any reason, and such appointment or substitution shall not terminate upon the death, disability, incapacity or resignation of the agent or co-agents who made the appointment or substitution. Any such appointment or substitution shall be evidenced by acknowledged written instrument.</p>
                        
                        <p style="margin-bottom: 15px;"><strong>Power to Perform All Other Acts.</strong> In addition to the powers enumerated above, I hereby give and grant unto my agent full power and authority to do and perform all and every act and thing whatsoever requisite and necessary to be done, as fully, to all intents and purposes, as I might or could do if personally present, hereby ratifying and confirming whatsoever my agent shall and may do by virtue hereof; provided, however, and notwithstanding the foregoing, if I have withheld a particular power or powers in this power of attorney, then my agent shall not have such power or powers by virtue of the power and authority conferred by this sentence.</p>
                   </div>
                    </div>

                <div class="form-section">
                    <div class="effectiveness-section">
                        <h4><strong>EFFECTIVENESS</strong></h4>
                        <p style="margin-bottom: 15px;">UNLESS YOU DIRECT OTHERWISE BELOW, THIS POWER OF ATTORNEY IS EFFECTIVE IMMEDIATELY AND WILL CONTINUE UNTIL IT TERMINATES.</p>
                        <p style="margin-bottom: 15px;"><strong>CHOOSE ONE OF THE FOLLOWING ALTERNATIVES BY CROSSING OUT THE ALTERNATIVE NOT CHOSEN:</strong></p>
                        
                        <div style="background: white; padding: 15px; border: 2px solid #dc3545; border-radius: 6px; margin: 15px 0;">
                            <p style="margin-bottom: 10px;"><strong>(A) Effective Immediately:</strong> This power of attorney is effective immediately and is not affected by my subsequent disability or incapacity.</p>
                            <p style="margin-bottom: 15px;" class="strikethrough"><strong>(B) Effective Upon Disability or Incapacity:</strong> This power of attorney becomes effective upon my disability or incapacity.</p>
                            <p style="margin-bottom: 10px; font-size: 0.9rem;">YOU SHOULD CHOOSE ALTERNATIVE (A) IF THIS POWER OF ATTORNEY IS TO BECOME EFFECTIVE ON THE DATE IT IS EXECUTED.</p>
                            <p style="font-size: 0.9rem;">IF NEITHER (A) NOR (B) IS CROSSED OUT, IT WILL BE ASSUMED THAT YOU CHOSE ALTERNATIVE (A).</p>
                        </div>
                        
                        <p style="font-size: 0.9rem; line-height: 1.4;">If Alternative (B) is chosen, I shall be considered disabled or incapacitated for purposes of this power of attorney if a physician certifies in writing at a date later than the date this power of attorney is executed that, based on the physician's medical examination of me, I am mentally incapable of managing my financial affairs. I authorize the physician who examines me for this purpose to disclose my physical or mental condition to another person for purposes of this power of attorney. A third party who accepts this power of attorney is fully protected from any action taken under this power of attorney that is based on the determination made by a physician of my disability or incapacity. After having been certified as being incapable of managing my financial affairs, if a physician certifies in writing at such later date that, based upon such physician's medical examination of me, I have regained the mental capacity to manage my financial affairs, then this power of attorney shall no longer be effective, and it shall become effective again only if a physician certifies in writing at a date later than the date I regained capacity that, based on the physician's medical examination of me, I am mentally incapable of managing my financial affairs.</p>

                        <p style="margin-top: 20px;">I agree that any third party who receives a copy of this document may act under it. Termination of this durable power of attorney is not effective as to a third party until the third party has actual knowledge of the termination. I agree to indemnify the third party for any claims that arise against the third party because of reliance on this power of attorney. The meaning and effect of this durable power of attorney is determined by Texas law.</p>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Document Execution Details</h3>
                    <div class="section-description">
                        üìÖ <strong>Important:</strong> The date below should be the date when the document will be signed (executed). The location should be where the signing will take place.
                    </div>
                    
                    <div class="form-group">
                        <label>Date the Document Will Be Signed *</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="exactDate" name="dateChoice" value="exact" onchange="toggleDateInput()">
                                <label for="exactDate">I know the exact signing date</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="blankDate" name="dateChoice" value="blank" onchange="toggleDateInput()">
                                <label for="blankDate">I want to leave blanks for the date (to be filled in when signed)</label>
                            </div>
                        </div>
                        
                        <div id="exactDateSection" class="hidden" style="margin-top: 15px;">
                            <label for="executionDate">Enter Signing Date (Example Format: June 19, 2025)</label>
                            <input type="text" id="executionDate" name="executionDate">
                        </div>
                        
                        <div id="blankDateSection" class="hidden" style="margin-top: 15px;">
                            <p style="color: #666; margin-bottom: 10px;">Enter what you know (or leave fields blank):</p>
                            <div class="date-inputs">
                                <div>
                                    <label for="executionMonth">Month</label>
                                    <input type="text" id="executionMonth" name="executionMonth">
                                </div>
                                <div>
                                    <label for="executionDay">Day</label>
                                    <input type="text" id="executionDay" name="executionDay">
                                </div>
                                <div>
                                    <label for="executionYear">Year</label>
                                    <input type="text" id="executionYear" name="executionYear">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="executionCity">City Where Document Will Be Signed *</label>
                        <input type="text" id="executionCity" name="executionCity" required autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="executionState">State Where Document Will Be Signed *</label>
                        <input type="text" id="executionState" name="executionState" required autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="executionCounty">County Where Document Will Be Signed *</label>
                        <input type="text" id="executionCounty" name="executionCounty" required autocomplete="off">
                    </div>
                </div>

                <div class="form-section">
                    <h3>Final Provisions</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
                        <p style="margin-bottom: 10px;">I agree that any third party who receives a copy of this document may act under it. Termination of this durable power of attorney is not effective as to a third party until the third party has actual knowledge of the termination. I agree to indemnify the third party for any claims that arise against the third party because of reliance on this power of attorney. The meaning and effect of this durable power of attorney is determined by Texas law.</p>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Additional Notes</h3>
                    <div class="form-group">
                        <label for="additionalNotes">Special Instructions or Comments</label>
                        <textarea id="additionalNotes" name="additionalNotes" rows="4"></textarea>
                    </div>
                </div>

                <button type="submit" class="submit-btn">
                    Submit for Review
                </button>

                <div class="loading-message" id="loadingMessage">
                    <h4>Generating Document...</h4>
                    <p>Please wait while we process your request and generate your formatted Word document.</p>
                </div>

                <div class="success-message" id="successMessage">
                    <h4>‚úÖ Success!</h4>
                    <p>Your Power of Attorney request has been sent successfully to don.r.hancock@gmail.com as a formatted Word document with proper initial lines.<br>
                    You can expect a response within 1-2 business days.</p>
                </div>

                <div class="error-message" id="errorMessage">
                    <h4>‚ùå Error</h4>
                    <p>There was an error sending your request. Please check your information and try again.</p>
                </div>
            </form>
        </div>
    </div>
     <script>
        // Enable continue button when document is selected
        document.getElementById('documentSelect').addEventListener('change', function() {
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.disabled = this.value === '';
        });

        // Load selected document form
        function loadSelectedDocument() {
            const selectedDoc = document.getElementById('documentSelect').value;
            const homePage = document.getElementById('homePage');
            
            if (selectedDoc === 'power-of-attorney') {
                homePage.style.display = 'none';
                document.getElementById('poaForm').style.display = 'block';
            }
        }

        // Go back to home page
        function goHome() {
            document.getElementById('homePage').style.display = 'block';
            document.getElementById('poaForm').style.display = 'none';
            // Reset form completely
            document.getElementById('powerOfAttorneyForm').reset();
            // Hide agent sections
            document.getElementById('secondAgentSection').classList.add('hidden');
            document.getElementById('thirdAgentSection').classList.add('hidden');
            // Hide date sections
            document.getElementById('exactDateSection').classList.add('hidden');
            document.getElementById('blankDateSection').classList.add('hidden');
            // Hide messages
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('loadingMessage').style.display = 'none';
        }

        // Toggle date input options
        function toggleDateInput() {
            const exactDate = document.getElementById('exactDate').checked;
            const blankDate = document.getElementById('blankDate').checked;
            const exactSection = document.getElementById('exactDateSection');
            const blankSection = document.getElementById('blankDateSection');
            
            if (exactDate) {
                exactSection.classList.remove('hidden');
                blankSection.classList.add('hidden');
                // Clear blank date fields
                document.getElementById('executionMonth').value = '';
                document.getElementById('executionDay').value = '';
                document.getElementById('executionYear').value = '';
            } else if (blankDate) {
                blankSection.classList.remove('hidden');
                exactSection.classList.add('hidden');
                // Clear exact date field
                document.getElementById('executionDate').value = '';
            } else {
                exactSection.classList.add('hidden');
                blankSection.classList.add('hidden');
            }
        }

        // Toggle second agent section
        function toggleSecondAgent() {
            const checkbox = document.getElementById('wantSecondAgent');
            const section = document.getElementById('secondAgentSection');
            
            if (checkbox.checked) {
                section.classList.remove('hidden');
            } else {
                section.classList.add('hidden');
                // Also hide third agent and uncheck
                document.getElementById('wantThirdAgent').checked = false;
                document.getElementById('thirdAgentSection').classList.add('hidden');
                // Clear the inputs
                document.getElementById('secondAgent').value = '';
                document.getElementById('thirdAgent').value = '';
            }
        }

        // Toggle third agent section
        function toggleThirdAgent() {
            const checkbox = document.getElementById('wantThirdAgent');
            const section = document.getElementById('thirdAgentSection');
            
            if (checkbox.checked) {
                section.classList.remove('hidden');
            } else {
                section.classList.add('hidden');
                document.getElementById('thirdAgent').value = '';
            }
        }

        // Handle form submission
        document.getElementById('powerOfAttorneyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('.submit-btn');
            const loadingMessage = document.getElementById('loadingMessage');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // Hide previous messages
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            loadingMessage.style.display = 'block';
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Generating Document...';
            
            try {
                const formData = new FormData(this);
                const data = {};
                
                // Process form data properly
                for (let [key, value] of formData.entries()) {
                    if (data[key]) {
                        // Handle multiple values
                        if (Array.isArray(data[key])) {
                            data[key].push(value);
                        } else {
                            data[key] = [data[key], value];
                        }
                    } else {
                        data[key] = value;
                    }
                }
                
                // Handle date formatting
                if (data.dateChoice === 'exact' && data.executionDate) {
                    // Keep the exact date as entered
                } else if (data.dateChoice === 'blank') {
                    // Format the partial date with blanks
                    const month = data.executionMonth || '______';
                    const day = data.executionDay || '___';
                    const year = data.executionYear || '____';
                    data.executionDate = `${month} ${day}, ${year}`;
                } else {
                    // If no date choice is made, require it
                    throw new Error('Please select a date option');
                }
                
                // Ensure required fields are present
                if (!data.testatorName || !data.clientEmail || !data.primaryAgent || 
                    !data.executionCity || !data.executionState || !data.executionCounty) {
                    throw new Error('Please fill in all required fields');
                }
                
                // Ensure we have empty strings for optional fields if not provided
                data.secondAgent = data.secondAgent || '';
                data.thirdAgent = data.thirdAgent || '';
                data.clientPhone = data.clientPhone || '';
                data.additionalNotes = data.additionalNotes || '';
                
                // Add flags for Word document generation with blank lines
                data.generateWordDocument = true;
                data.useBlankLines = true;  // This tells backend to use _____ instead of checkboxes
                data.documentType = 'power-of-attorney';
                
                console.log('Sending data for Word document generation:', data);
                
                // Uncomment when backend is ready:
                const response = await fetch('/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                console.log('Response status:', response.status);
                
                const result = await response.json();
                console.log('Result:', result);
                
                if (!result.success) {
                    throw new Error(result.message || 'Word document generation failed');
                }
                
                loadingMessage.style.display = 'none';
                successMessage.style.display = 'block';
                this.reset();
                // Reset checkboxes and sections
                document.getElementById('wantSecondAgent').checked = false;
                document.getElementById('wantThirdAgent').checked = false;
                document.getElementById('secondAgentSection').classList.add('hidden');
                document.getElementById('thirdAgentSection').classList.add('hidden');
                document.getElementById('exactDateSection').classList.add('hidden');
                document.getElementById('blankDateSection').classList.add('hidden');
                
            } catch (error) {
                console.error('Error:', error);
                loadingMessage.style.display = 'none';
                errorMessage.style.display = 'block';
                
                // Show more specific error message
                const errorP = errorMessage.querySelector('p');
                errorP.textContent = error.message || 'There was an error generating your Word document. Please check your information and try again.';
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit for Review';
            }
        });

        // Prevent form from submitting when user presses Enter in text fields
        document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"]').forEach(input => {
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                }
            });
        });

        // Add some visual feedback when form sections are completed
        document.querySelectorAll('input[required]').forEach(input => {
            input.addEventListener('blur', function() {
                if (this.value.trim()) {
                    this.style.borderColor = '#27ae60';
                } else {
                    this.style.borderColor = '#ddd';
                }
            });
        });

        // Scroll to top when switching between home and form
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Add scroll to top when loading form
        document.getElementById('continueBtn').addEventListener('click', function() {
            setTimeout(scrollToTop, 100);
        });

        // Add scroll to top when going back to home
        document.querySelector('.back-btn').addEventListener('click', function() {
            setTimeout(scrollToTop, 100);
        });

        // Auto-resize textarea
        document.getElementById('additionalNotes').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });

        // Form validation helper
        function validateForm() {
            const requiredFields = document.querySelectorAll('input[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#e74c3c';
                    isValid = false;
                } else {
                    field.style.borderColor = '#27ae60';
                }
            });
            
            // Check date choice
            const dateChoice = document.querySelector('input[name="dateChoice"]:checked');
            if (!dateChoice) {
                isValid = false;
                document.querySelectorAll('input[name="dateChoice"]').forEach(radio => {
                    radio.parentElement.style.borderColor = '#e74c3c';
                });
            }
            
            return isValid;
        }

        // Add validation on form submit
        document.getElementById('powerOfAttorneyForm').addEventListener('submit', function(e) {
            if (!validateForm()) {
                e.preventDefault();
                const errorMessage = document.getElementById('errorMessage');
                const errorP = errorMessage.querySelector('p');
                errorP.textContent = 'Please fill in all required fields and make all necessary selections.';
                errorMessage.style.display = 'block';
                
                // Scroll to first error
                const firstError = document.querySelector('input[style*="border-color: rgb(231, 76, 60)"]');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    firstError.focus();
                }
            }
        });
    </script>
</body>
</html>
