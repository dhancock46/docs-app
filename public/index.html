<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Document Preparation Service</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-content {
            padding: 3rem 2rem;
            text-align: center;
        }

        .document-selector {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            border: 2px solid #e9ecef;
        }

        .document-selector h2 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        .dropdown-container {
            margin-bottom: 2rem;
        }

        select {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            background: white;
            cursor: pointer;
        }

        select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .continue-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .continue-btn:hover {
            background: linear-gradient(135deg, #2980b9, #3498db);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .continue-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .form-container {
            display: none;
            padding: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .form-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
        }

       .form-section h3 {
        color: #2c3e50;
        margin-bottom: 1rem;
        font-size: 1.3rem;
        border-bottom: 2px solid #3498db;
        padding-bottom: 0.5rem;
        text-align: center;
        font-weight: bold;
       }
/* Style the main document title differently */
.document-title {
    text-align: center;
    font-family: 'Times New Roman', serif;
    font-size: 1.8rem;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 1.5rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Center and bold subheadings */
.form-section h4,
.notice-section h4,
.benefits-section h4,
.limitations-section h4,
.additional-powers-section h4,
.effectiveness-section h4 {
    text-align: center;
    font-weight: bold;
}

/* Center the special instruction subheadings */
.form-section p strong {
    display: block;
    text-align: center;
    margin-bottom: 10px;
}
        .section-description {
            background: #e8f4f8;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            color: #2c3e50;
            font-style: italic;
            border-left: 4px solid #3498db;
        }

        .notice-section {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .notice-section h4 {
            color: #856404;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .notice-section p {
            color: #856404;
            margin-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .checkbox-group {
            margin-left: 20px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: #f0f8ff;
            border-color: #3498db;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 15px;
            margin-top: 3px;
            transform: scale(1.3);
            cursor: pointer;
        }

        .checkbox-item label {
            cursor: pointer;
            margin-bottom: 0;
            flex: 1;
        }

        /* Styles for blank lines approach */
        .power-line {
            display: flex;
            align-items: flex-start;
            padding: 8px 12px;
            margin-bottom: 6px;
            background: white;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }

        .initial-line {
            display: inline-block;
            width: 60px;
            border-bottom: 1px solid #333;
            margin-right: 12px;
            margin-top: 2px;
            font-family: monospace;
            text-align: center;
            font-size: 0.9rem;
        }

        .authority-line {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            margin-bottom: 8px;
            background: #fef9e7;
            border-radius: 6px;
            border: 2px solid #f39c12;
        }

        .authority-line .initial-line {
            width: 70px;
            border-bottom: 2px solid #d35400;
            margin-right: 15px;
        }

        .authority-line label {
            font-weight: 600;
            color: #d35400;
            margin-bottom: 0;
        }

        .instruction-line {
            display: flex;
            align-items: flex-start;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: white;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        .gift-line {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            background: #fdf2f2;
            border-radius: 6px;
            border: 2px solid #e74c3c;
            margin-bottom: 10px;
        }

        .gift-line .initial-line {
            border-bottom: 2px solid #e74c3c;
            width: 70px;
        }

        input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .radio-group {
            margin-top: 10px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .radio-item:hover {
            background: #f0f8ff;
            border-color: #3498db;
        }

        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .date-inputs input {
            text-align: center;
        }

        .submit-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 2rem;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3);
        }

        .submit-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .back-btn {
            background: #6c757d;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin-bottom: 2rem;
        }

        .back-btn:hover {
            background: #5a6268;
        }

        .hidden {
            display: none;
        }

        .success-message {
            display: none;
            background: #d4edda;
            color: #155724;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid #c3e6cb;
            text-align: center;
        }

        .error-message {
            display: none;
            background: #f8d7da;
            color: #721c24;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid #f5c6cb;
            text-align: center;
        }

        .loading-message {
            display: none;
            background: #fff3cd;
            color: #856404;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid #ffeaa7;
            text-align: center;
        }

        .benefits-section {
            background: #f0f8ff;
            border: 2px solid #3498db;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .benefits-section h4 {
            color: #2980b9;
            margin-bottom: 10px;
        }

        .benefits-section p {
            color: #34495e;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 0;
        }

        .limitations-section {
            background: #f8f9fa;
            border: 2px solid #6c757d;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .limitations-section h4 {
            color: #495057;
            margin-bottom: 10px;
        }

        .additional-powers-section {
            background: #e7f3ff;
            border: 2px solid #007bff;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .additional-powers-section h4 {
            color: #0056b3;
            margin-bottom: 10px;
        }

        .effectiveness-section {
            background: #fff5f5;
            border: 2px solid #dc3545;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .effectiveness-section h4 {
            color: #721c24;
            margin-bottom: 10px;
        }

        .strikethrough {
            text-decoration: line-through;
            color: #6c757d;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .main-content {
                padding: 2rem 1rem;
            }

            .date-inputs {
                grid-template-columns: 1fr;
            }

            .form-container {
                padding: 1rem;
            }
        }
         /* Help system styles */
    .help-icon {
        display: inline-block;
        margin-left: 8px;
        cursor: pointer;
        font-size: 16px;
        color: #3498db;
        transition: color 0.3s ease;
    }

    .help-icon:hover {
        color: #2980b9;
    }

    .help-popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        border: 2px solid #3498db;
        border-radius: 8px;
        padding: 20px;
        max-width: 400px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        z-index: 1000;
    }

    .help-popup h4 {
        color: #2c3e50;
        margin-bottom: 10px;
        font-size: 1.1rem;
    }

    .help-popup p {
        color: #555;
        line-height: 1.5;
        margin-bottom: 15px;
    }

    .help-close {
        background: #3498db;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        float: right;
    }

    .help-close:hover {
        background: #2980b9;
    }

    .help-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 999;
    }

    .help-icon:hover {
        color: #2980b9;
    }

    .help-popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        border: 2px solid #3498db;
        border-radius: 8px;
        padding: 20px;
        max-width: 400px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        z-index: 1000;
    }

    .help-popup h4 {
        color: #2c3e50;
        margin-bottom: 10px;
        font-size: 1.1rem;
    }

    .help-popup p {
        color: #555;
        line-height: 1.5;
        margin-bottom: 15px;
    }

    .help-close {
        background: #3498db;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        float: right;
    }

    .help-close:hover {
        background: #2980b9;
    }

    .help-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 999;
    }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Legal Document Preparation</h1>
            <p>Professional Legal Document Drafting Service</p>
        </div>

        <!-- Home Page -->
        <div class="main-content" id="homePage">
            <div class="document-selector">
                <h2>Select Document Type</h2>
                <p style="margin-bottom: 1.5rem; color: #666;">Choose the legal document you need prepared:</p>
                
                <div class="dropdown-container">
                    <select id="documentSelect">
                        <option value="">-- Select a Document --</option>
                        <option value="power-of-attorney">Power of Attorney (Statutory)</option>
                        <option value="medical-power-of-attorney">Medical Power of Attorney</option>
                    </select>
                </div>
                
                <button class="continue-btn" id="continueBtn" disabled onclick="loadSelectedDocument()">
                    Continue to Document Preparation
                </button>
            </div>

            <div class="document-title">
            Statutory Power of Attorney
            </div>
            <div style="background: #e8f4f8; padding: 1.5rem; border-radius: 8px; margin-top: 2rem;">
                <h3 style="color: #2c3e50; margin-bottom: 1rem;">How It Works</h3>
                <p style="color: #555; line-height: 1.6;">
                    1. Select your document type from the dropdown menu<br>
                    2. Fill out the required information in our guided form<br>
                    3. Submit for professional review and preparation<br>
                    4. Receive your completed document within 1-2 business days
                </p>
            </div>
        </div>

       <!-- Power of Attorney Form -->
<div class="form-container" id="poaForm">
    <button class="back-btn" onclick="goHome()">‚Üê Back to Document Selection</button>
    
    <form id="powerOfAttorneyForm">
        <div class="form-section">
            <h3>Principal Information</h3>
            <div class="form-group">
                <label for="testatorName">
                    Full Legal Name of Principal *
                    <span class="help-icon" onclick="showHelp('principalNameHelp')">üí°</span>
                </label>
                <input type="text" id="testatorName" name="testatorName" required>
            </div>
            <div class="form-group">
                <label for="clientEmail">Email Address *</label>
                <input type="email" id="clientEmail" name="clientEmail" required>
            </div>
        </div>

        <div class="form-section">
            <h3>Agent Information</h3>
            <div class="form-group">
                <label for="primaryAgent">
                    Primary Agent (Full Name) *
                    <span class="help-icon" onclick="showHelp('primaryAgentHelp')">üí°</span>
                </label>
                <input type="text" id="primaryAgent" name="primaryAgent" required autocomplete="off">
            </div>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="wantSecondAgent" onchange="toggleSecondAgent()">
                    I want to appoint a second agent
                </label>
            </div>
            
            <div class="form-group hidden" id="secondAgentSection">
                <label for="secondAgent">Second Agent (Full Name)</label>
                <input type="text" id="secondAgent" name="secondAgent" autocomplete="off">
                
                <div style="margin-top: 15px;">
                    <label>
                        <input type="checkbox" id="wantThirdAgent" onchange="toggleThirdAgent()">
                        I want to appoint a third agent
                    </label>
                </div>
            </div>
            
            <div class="form-group hidden" id="thirdAgentSection">
                <label for="thirdAgent">Third Agent (Full Name)</label>
                <input type="text" id="thirdAgent" name="thirdAgent" autocomplete="off">
            </div>
        </div>

        <div class="form-section">
            <h3>Signing Information</h3>
            <div class="form-group">
                <label>Date the Document Will Be Signed *</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="exactDate" name="dateChoice" value="exact" onchange="toggleDateInput()" required>
                        <label for="exactDate">I know the exact signing date</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="blankDate" name="dateChoice" value="blank" onchange="toggleDateInput()" required>
                        <label for="blankDate">I don't know the exact signing date</label>
                    </div>
                </div>
                <div id="exactDateSection" class="hidden" style="margin-top: 15px;">
                    <label for="executionDate">Enter Signing Date</label>
                    <input type="text" id="executionDate" name="executionDate" placeholder="Example: June 15, 2025">
                </div>
                <div id="blankDateSection" class="hidden" style="margin-top: 15px;">
                    <label>Enter known parts of the date (leave blank for unknown):</label>
                    <div class="date-inputs" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-top: 10px;">
                        <div>
                            <label for="executionMonth">Month</label>
                            <input type="text" id="executionMonth" name="executionMonth" placeholder="June or leave blank">
                        </div>
                        <div>
                            <label for="executionDay">Day</label>
                            <input type="text" id="executionDay" name="executionDay" placeholder="15 or leave blank">
                        </div>
                        <div>
                            <label for="executionYear">Year</label>
                            <input type="text" id="executionYear" name="executionYear" placeholder="2025 or leave blank">
                        </div>
                    </div>
                </div>
            </div> 
            
            <div class="form-group">
                <label for="executionCity">City Where Document Will Be Signed *</label>
                <input type="text" id="executionCity" name="executionCity" required autocomplete="off">
            </div>
            <div class="form-group">
                <label for="executionState">State Where Document Will Be Signed *</label>
                <input type="text" id="executionState" name="executionState" required autocomplete="off">
            </div>
            <div class="form-group">
                <label for="executionCounty">County Where Document Will Be Signed *</label>
                <input type="text" id="executionCounty" name="executionCounty" required autocomplete="off">
            </div>
        </div>

        <button type="submit" class="submit-btn">Submit for Review</button>

        <div class="loading-message" id="loadingMessage">
            <h4>Generating Document...</h4>
            <p>Please wait while we process your request and generate your formatted Word document.</p>
        </div>

        <div class="success-message" id="successMessage">
            <h4>‚úÖ Success!</h4>
            <p>Your Power of Attorney request has been sent successfully to don.r.hancock@gmail.com as a formatted Word document with proper initial lines.<br>
            You can expect a response within 1-2 business days.</p>
        </div>

        <div class="error-message" id="errorMessage">
            <h4>‚ùå Error</h4>
            <p>There was an error sending your request. Please check your information and try again.</p>
        </div>
    </form>
</div>
 
<!-- Medical Power of Attorney Form -->
<div class="form-container" id="medicalPoaForm" style="display: none;">
    <button class="back-btn" onclick="goHome()">‚Üê Back to Document Selection</button>
    
    <form id="medicalPowerOfAttorneyForm">
        <div class="form-section">
            <h3>Personal Information</h3>
            <div class="form-group">
                <label for="medicalTestatorName">
                    Full Legal Name of Principal *
                    <span class="help-icon" onclick="showHelp('principalNameHelp')">üí°</span>
                </label>
                <input type="text" id="medicalTestatorName" name="testatorName" required>
            </div>
            <div class="form-group">
                <label for="medicalClientEmail">Email Address *</label>
                <input type="email" id="medicalClientEmail" name="clientEmail" required>
            </div>
        </div>

        <div class="form-section">
            <h3>Health Care Agent Information</h3>
            <div class="form-group">
                <label for="medicalPrimaryAgent">
                    Primary Health Care Agent (Full Name) *
                    <span class="help-icon" onclick="showHelp('primaryAgentHelp')">üí°</span>
                </label>
                <input type="text" id="medicalPrimaryAgent" name="primaryAgent" required autocomplete="off">
            </div>
            
            <div class="form-group">
                <label>Alternate Agents</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="noAlternates" name="alternateChoice" value="none" onchange="toggleAlternateAgents()" required>
                        <label for="noAlternates">I elect not to name any alternate agents</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="wantAlternates" name="alternateChoice" value="yes" onchange="toggleAlternateAgents()" required>
                        <label for="wantAlternates">I want to designate alternate agents</label>
                    </div>
                </div>
            </div>
            
            <div class="form-group hidden" id="alternateAgentsSection">
                <div class="form-group">
                    <label for="firstAlternateAgent">First Alternate Agent (Full Name)</label>
                    <input type="text" id="firstAlternateAgent" name="firstAlternateAgent" autocomplete="off">
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="wantSecondAlternate" onchange="toggleSecondAlternate()">
                        I want to appoint a second alternate agent
                    </label>
                </div>
                
                <div class="form-group hidden" id="secondAlternateSection">
                    <label for="secondAlternateAgent">Second Alternate Agent (Full Name)</label>
                    <input type="text" id="secondAlternateAgent" name="secondAlternateAgent" autocomplete="off">
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>Signing Information</h3>
            <div class="form-group">
                <label>Date the Document Will Be Signed *</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="medicalExactDate" name="medicalDateChoice" value="exact" onchange="toggleMedicalDateInput()" required>
                        <label for="medicalExactDate">I know the exact signing date</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="medicalBlankDate" name="medicalDateChoice" value="blank" onchange="toggleMedicalDateInput()" required>
                        <label for="medicalBlankDate">I don't know the exact signing date</label>
                    </div>
                </div>
                <div id="medicalExactDateSection" class="hidden" style="margin-top: 15px;">
                    <label for="medicalExecutionDate">Enter Signing Date</label>
                    <input type="text" id="medicalExecutionDate" name="executionDate" placeholder="Example: June 15, 2025">
                </div>
                <div id="medicalBlankDateSection" class="hidden" style="margin-top: 15px;">
                    <label>Enter known parts of the date (leave blank for unknown):</label>
                    <div class="date-inputs" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-top: 10px;">
                        <div>
                            <label for="medicalExecutionMonth">Month</label>
                            <input type="text" id="medicalExecutionMonth" name="executionMonth" placeholder="June or leave blank">
                        </div>
                        <div>
                            <label for="medicalExecutionDay">Day</label>
                            <input type="text" id="medicalExecutionDay" name="executionDay" placeholder="15 or leave blank">
                        </div>
                        <div>
                            <label for="medicalExecutionYear">Year</label>
                            <input type="text" id="medicalExecutionYear" name="executionYear" placeholder="2025 or leave blank">
                        </div>
                    </div>
                </div>
            </div> 
            
            <div class="form-group">
                <label for="medicalExecutionCity">City Where Document Will Be Signed *</label>
                <input type="text" id="medicalExecutionCity" name="executionCity" required autocomplete="off">
            </div>
            <div class="form-group">
                <label for="medicalExecutionState">State Where Document Will Be Signed *</label>
                <input type="text" id="medicalExecutionState" name="executionState" required autocomplete="off">
            </div>
            <div class="form-group">
                <label for="medicalExecutionCounty">County Where Document Will Be Signed *</label>
                <input type="text" id="medicalExecutionCounty" name="executionCounty" required autocomplete="off">
            </div>
        </div>

        <button type="submit" class="submit-btn">Submit for Review</button>

        <div class="loading-message" id="medicalLoadingMessage">
            <h4>Generating Document...</h4>
            <p>Please wait while we process your request and generate your formatted Word document.</p>
        </div>

        <div class="success-message" id="medicalSuccessMessage">
            <h4>‚úÖ Success!</h4>
            <p>Your Medical Power of Attorney request has been sent successfully to don.r.hancock@gmail.com as a formatted Word document.<br>
            You can expect a response within 1-2 business days.</p>
        </div>

        <div class="error-message" id="medicalErrorMessage">
            <h4>‚ùå Error</h4>
            <p>There was an error sending your request. Please check your information and try again.</p>
        </div>
    </form>
</div>
        <script>
        // Help system functions
        function showHelp(helpId) {
            document.getElementById('helpOverlay').style.display = 'block';
            document.getElementById(helpId).style.display = 'block';
        }

        function closeHelp() {
            document.getElementById('helpOverlay').style.display = 'none';
            const helpPopups = document.querySelectorAll('.help-popup');
            helpPopups.forEach(popup => {
                popup.style.display = 'none';
            });
        }
        // Auto-expand state abbreviations
        document.getElementById('executionState').addEventListener('blur', function() {
            const stateAbbreviations = {
                'TX': 'Texas',
                'CA': 'California',
                'FL': 'Florida',
                'NY': 'New York',
                // Add more states as needed
                'AL': 'Alabama',
                'AK': 'Alaska',
                'AZ': 'Arizona',
                'AR': 'Arkansas',
                'CO': 'Colorado',
                'CT': 'Connecticut',
                'DE': 'Delaware',
                'GA': 'Georgia',
                'HI': 'Hawaii',
                'ID': 'Idaho',
                'IL': 'Illinois',
                'IN': 'Indiana',
                'IA': 'Iowa',
                'KS': 'Kansas',
                'KY': 'Kentucky',
                'LA': 'Louisiana',
                'ME': 'Maine',
                'MD': 'Maryland',
                'MA': 'Massachusetts',
                'MI': 'Michigan',
                'MN': 'Minnesota',
                'MS': 'Mississippi',
                'MO': 'Missouri',
                'MT': 'Montana',
                'NE': 'Nebraska',
                'NV': 'Nevada',
                'NH': 'New Hampshire',
                'NJ': 'New Jersey',
                'NM': 'New Mexico',
                'NC': 'North Carolina',
                'ND': 'North Dakota',
                'OH': 'Ohio',
                'OK': 'Oklahoma',
                'OR': 'Oregon',
                'PA': 'Pennsylvania',
                'RI': 'Rhode Island',
                'SC': 'South Carolina',
                'SD': 'South Dakota',
                'TN': 'Tennessee',
                'UT': 'Utah',
                'VT': 'Vermont',
                'VA': 'Virginia',
                'WA': 'Washington',
                'WV': 'West Virginia',
                'WI': 'Wisconsin',
                'WY': 'Wyoming'
            };
       // Auto-expand state abbreviations for Medical POA
document.getElementById('medicalExecutionState').addEventListener('blur', function() {
    const stateAbbreviations = {
        'TX': 'Texas',
        'CA': 'California',
        // ... (same list as above)
    };
    
    const entered = this.value.trim().toUpperCase();
    if (stateAbbreviations[entered]) {
        this.value = stateAbbreviations[entered];
    }
});     
            const entered = this.value.trim().toUpperCase();
            if (stateAbbreviations[entered]) {
                this.value = stateAbbreviations[entered];
            }
        });
        // Enable continue button when document is selected
        document.getElementById('documentSelect').addEventListener('change', function() {
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.disabled = this.value === '';
        });

        // Load selected document form
       function loadSelectedDocument() {
    const selectedDoc = document.getElementById('documentSelect').value;
    const homePage = document.getElementById('homePage');
    
    if (selectedDoc === 'power-of-attorney') {
        homePage.style.display = 'none';
        document.getElementById('poaForm').style.display = 'block';
        document.getElementById('medicalPoaForm').style.display = 'none';
    } else if (selectedDoc === 'medical-power-of-attorney') {
        homePage.style.display = 'none';
        document.getElementById('poaForm').style.display = 'none';
        document.getElementById('medicalPoaForm').style.display = 'block';
    }
}

   // Go back to home page
function goHome() {
    document.getElementById('homePage').style.display = 'block';
    document.getElementById('poaForm').style.display = 'none';
    document.getElementById('medicalPoaForm').style.display = 'none';
    
    // Reset both forms completely
    document.getElementById('powerOfAttorneyForm').reset();
    
    // Check if medical form exists and reset it
    const medicalForm = document.getElementById('medicalPowerOfAttorneyForm');
    if (medicalForm) {
        medicalForm.reset();
    
        // Toggle date input options
        function toggleDateInput() {
            const exactDate = document.getElementById('exactDate').checked;
            const blankDate = document.getElementById('blankDate').checked;
            const exactSection = document.getElementById('exactDateSection');
            const blankSection = document.getElementById('blankDateSection');
            
            if (exactDate) {
                exactSection.classList.remove('hidden');
                blankSection.classList.add('hidden');
                // Clear blank date fields
                document.getElementById('executionMonth').value = '';
                document.getElementById('executionDay').value = '';
                document.getElementById('executionYear').value = '';
            } else if (blankDate) {
                blankSection.classList.remove('hidden');
                exactSection.classList.add('hidden');
                // Clear exact date field
                document.getElementById('executionDate').value = '';
            } else {
                exactSection.classList.add('hidden');
                blankSection.classList.add('hidden');
            }
        }

        // Toggle second agent section
        function toggleSecondAgent() {
            const checkbox = document.getElementById('wantSecondAgent');
            const section = document.getElementById('secondAgentSection');
            
            if (checkbox.checked) {
                section.classList.remove('hidden');
            } else {
                section.classList.add('hidden');
                // Also hide third agent and uncheck
                document.getElementById('wantThirdAgent').checked = false;
                document.getElementById('thirdAgentSection').classList.add('hidden');
                // Clear the inputs
                document.getElementById('secondAgent').value = '';
                document.getElementById('thirdAgent').value = '';
            }
        }

        // Toggle third agent section
        function toggleThirdAgent() {
            const checkbox = document.getElementById('wantThirdAgent');
            const section = document.getElementById('thirdAgentSection');
            
            if (checkbox.checked) {
                section.classList.remove('hidden');
            } else {
                section.classList.add('hidden');
                document.getElementById('thirdAgent').value = '';
            }
        }
// Toggle alternate agents for Medical POA
function toggleAlternateAgents() {
    const wantAlternates = document.getElementById('wantAlternates').checked;
    const noAlternates = document.getElementById('noAlternates').checked;
    const section = document.getElementById('alternateAgentsSection');
    
    if (wantAlternates) {
        section.classList.remove('hidden');
    } else if (noAlternates) {
        section.classList.add('hidden');
        // Clear the inputs
        document.getElementById('firstAlternateAgent').value = '';
        document.getElementById('secondAlternateAgent').value = '';
        // Hide second alternate
        document.getElementById('wantSecondAlternate').checked = false;
        document.getElementById('secondAlternateSection').classList.add('hidden');
    }
}

// Toggle second alternate agent for Medical POA
function toggleSecondAlternate() {
    const checkbox = document.getElementById('wantSecondAlternate');
    const section = document.getElementById('secondAlternateSection');
    
    if (checkbox.checked) {
        section.classList.remove('hidden');
    } else {
        section.classList.add('hidden');
        document.getElementById('secondAlternateAgent').value = '';
    }
}

// Toggle date input for Medical POA
function toggleMedicalDateInput() {
    const exactDate = document.getElementById('medicalExactDate').checked;
    const blankDate = document.getElementById('medicalBlankDate').checked;
    const exactSection = document.getElementById('medicalExactDateSection');
    const blankSection = document.getElementById('medicalBlankDateSection');
    
    if (exactDate) {
        exactSection.classList.remove('hidden');
        blankSection.classList.add('hidden');
        // Clear blank date fields
        document.getElementById('medicalExecutionMonth').value = '';
        document.getElementById('medicalExecutionDay').value = '';
        document.getElementById('medicalExecutionYear').value = '';
    } else if (blankDate) {
        blankSection.classList.remove('hidden');
        exactSection.classList.add('hidden');
        // Clear exact date field
        document.getElementById('medicalExecutionDate').value = '';
    } else {
        exactSection.classList.add('hidden');
        blankSection.classList.add('hidden');
    }
}
            // Handle form submission
        document.getElementById('powerOfAttorneyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('.submit-btn');
            const loadingMessage = document.getElementById('loadingMessage');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // Hide previous messages
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            loadingMessage.style.display = 'block';
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Generating Document...';
            
            try {
                const formData = new FormData(this);
                const data = {};
                
                // Process form data properly
                for (let [key, value] of formData.entries()) {
                    if (data[key]) {
                        // Handle multiple values
                        if (Array.isArray(data[key])) {
                            data[key].push(value);
                        } else {
                            data[key] = [data[key], value];
                        }
                    } else {
                        data[key] = value;
                    }
                }
                
              // Handle date formatting
             if (data.dateChoice === 'exact' && data.executionDate) {
             // Keep the exact date as entered
             } else if (data.dateChoice === 'blank') {
            // Format the partial date with blanks
            const month = data.executionMonth || '_______';
            const day = data.executionDay || '___';
            const year = data.executionYear || '____';
             data.executionDate = `${month} ${day}, ${year}`;
            } else {
            // If no date choice is made, require it
            throw new Error('Please select a date option');
            }
                
                // Ensure required fields are present
                if (!data.testatorName || !data.clientEmail || !data.primaryAgent || 
                    !data.executionCity || !data.executionState || !data.executionCounty) {
                    throw new Error('Please fill in all required fields');
                }
                
                // Ensure we have empty strings for optional fields if not provided
                data.secondAgent = data.secondAgent || '';
                data.thirdAgent = data.thirdAgent || '';
                data.clientPhone = data.clientPhone || '';
                data.additionalNotes = data.additionalNotes || '';
                
                // Add flags for Word document generation with blank lines
                data.generateWordDocument = true;
                data.useBlankLines = true;  // This tells backend to use _____ instead of checkboxes
                data.documentType = 'power-of-attorney';
                
                console.log('Sending data for Word document generation:', data);
                
                // Uncomment when backend is ready:
                const response = await fetch('/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                console.log('Response status:', response.status);
                
                const result = await response.json();
                console.log('Result:', result);
                
                if (!result.success) {
                    throw new Error(result.message || 'Word document generation failed');
                }
                
                loadingMessage.style.display = 'none';
                successMessage.style.display = 'block';
                this.reset();
               // Reset checkboxes and sections (only if they exist)
                const wantSecondAgent = document.getElementById('wantSecondAgent');
                const wantThirdAgent = document.getElementById('wantThirdAgent');
                const secondAgentSection = document.getElementById('secondAgentSection');
                const thirdAgentSection = document.getElementById('thirdAgentSection');
                const exactDateSection = document.getElementById('exactDateSection');
                const blankDateSection = document.getElementById('blankDateSection');
                
                if (wantSecondAgent) wantSecondAgent.checked = false;
                if (wantThirdAgent) wantThirdAgent.checked = false;
                if (secondAgentSection) secondAgentSection.classList.add('hidden');
                if (thirdAgentSection) thirdAgentSection.classList.add('hidden');
                if (exactDateSection) exactDateSection.classList.add('hidden');
                if (blankDateSection) blankDateSection.classList.add('hidden');
                
            } catch (error) {
                console.error('Error:', error);
                loadingMessage.style.display = 'none';
                errorMessage.style.display = 'block';
                
                // Show more specific error message
                const errorP = errorMessage.querySelector('p');
                errorP.textContent = error.message || 'There was an error generating your Word document. Please check your information and try again.';
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit for Review';
            }
        });

        // Prevent form from submitting when user presses Enter in text fields
        document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"]').forEach(input => {
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                }
            });
        });

        // Add some visual feedback when form sections are completed
        document.querySelectorAll('input[required]').forEach(input => {
            input.addEventListener('blur', function() {
                if (this.value.trim()) {
                    this.style.borderColor = '#27ae60';
                } else {
                    this.style.borderColor = '#ddd';
                }
            });
        });

        // Scroll to top when switching between home and form
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Add scroll to top when loading form
        document.getElementById('continueBtn').addEventListener('click', function() {
            setTimeout(scrollToTop, 100);
        });

        // Add scroll to top when going back to home
        document.querySelector('.back-btn').addEventListener('click', function() {
            setTimeout(scrollToTop, 100);
        });

        // Auto-resize textarea
        document.getElementById('additionalNotes').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });

        // Form validation helper
        function validateForm() {
            const requiredFields = document.querySelectorAll('input[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#e74c3c';
                    isValid = false;
                } else {
                    field.style.borderColor = '#27ae60';
                }
            });
            
            // Check date choice
            const dateChoice = document.querySelector('input[name="dateChoice"]:checked');
            if (!dateChoice) {
                isValid = false;
                document.querySelectorAll('input[name="dateChoice"]').forEach(radio => {
                    radio.parentElement.style.borderColor = '#e74c3c';
                });
            }
            
            return isValid;
        }

        // Add validation on form submit
        document.getElementById('powerOfAttorneyForm').addEventListener('submit', function(e) {
            if (!validateForm()) {
                e.preventDefault();
                const errorMessage = document.getElementById('errorMessage');
                const errorP = errorMessage.querySelector('p');
                errorP.textContent = 'Please fill in all required fields and make all necessary selections.';
                errorMessage.style.display = 'block';
                
                // Scroll to first error
                const firstError = document.querySelector('input[style*="border-color: rgb(231, 76, 60)"]');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    firstError.focus();
                }
            }
        });
</script>
    <!-- Help Popups -->
<div class="help-overlay" id="helpOverlay" onclick="closeHelp()"></div>

<div class="help-popup" id="principalNameHelp">
    <h4>Full Legal Name of Principal</h4>
    <p>Use your full legal name such as the name on your drivers license or passport. Include any suffixes such as "Jr." or "Sr."Do not use prefixes such as "Mr." or "Ms.". Do not use nicknames such as "Billy" rather than "William.</p>
    <button class="help-close" onclick="closeHelp()">Close</button>
</div>

<div class="help-popup" id="primaryAgentHelp">
    <h4>Primary Agent (Full Name)</h4>
    <p>Use your full legal name such as the name on your drivers license or passport. Include any suffixes such as "Jr." or "Sr."Do not use prefixes such as "Mr." or "Ms.". Do not use nicknames such as "Billy" rather than "William.</p>
    <button class="help-close" onclick="closeHelp()">Close</button>
</div>
</body>
</html>
