<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will Remaining Estate - Legal Document Preparation</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Last Will and Testament - Remaining Estate Distribution</h1>
            <p>How should the remainder of your estate be distributed?</p>
        </div>
        
        <div class="form-container" style="display: block;">
            <button class="back-btn" onclick="window.location.href='gifts.html'">‚Üê Back to Specific Gifts</button>

            <form id="remainingEstateForm">
                <input type="hidden" id="testatorName" name="testatorName">
                <input type="hidden" id="clientEmail" name="clientEmail">
                
                <!-- Progress Indicator -->
                <div class="form-section">
                    <h3>Section Progress</h3>
                    <p>‚úÖ Personal & Family Information Complete</p>
                    <p>‚úÖ Specific Gifts Complete</p>
                    <p>üîÑ <strong>Current: Remaining Estate Distribution</strong></p>
                    <p>‚è≥ Executors & Final Review (Next)</p>
                </div>

                <!-- Primary Beneficiaries Section -->
                <div class="form-section" id="primaryBeneficiariesSection" style="display: none;">
                    <h3 id="primaryBeneficiariesTitle">Primary Beneficiaries</h3>
                    <p id="primaryBeneficiariesDescription">Who should receive your remaining estate?</p>
                    
                    <div class="form-group">
                        <label>Primary Beneficiaries *</label>
                        <div class="radio-group" id="primaryBeneficiariesRadioGroup">
                            <!-- Options will be populated by JavaScript based on user situation -->
                        </div>
                    </div>

                    <!-- Spouse Percentage Input (for partial distribution) -->
                    <div class="form-group" id="spousePercentageGroup" style="display: none;">
                        <label for="spousePercentage">Percentage to Spouse *</label>
                        <input type="number" id="spousePercentage" name="spousePercentage" min="1" max="99" placeholder="75" onchange="calculateRemainingPercentage()">
                        <span>%</span>
                        <small>Enter a number between 1 and 99</small>
                    </div>

                    <!-- Remaining Percentage Distribution -->
                    <div class="form-group" id="remainingPercentageGroup" style="display: none;">
                        <h4 id="remainingPercentageTitle">You have <span id="remainingAmount">25</span>% remaining. How would you like to distribute it?</h4>
                        <div class="radio-group" id="remainingDistributionRadioGroup">
                            <!-- Options will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Children Details -->
                    <div class="form-group" id="childrenDetailsGroup" style="display: none;">
                        <h4>Children Distribution Details</h4>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="childrenEqual" name="childrenDistribution" value="equal" onchange="hideCustomChildShares()">
                                <label for="childrenEqual">Equal shares to all children</label>
                            </div>
                            <div class="radio-item" id="childrenCustomOption" style="display: none;">
                                <input type="radio" id="childrenCustom" name="childrenDistribution" value="custom" onchange="showCustomChildShares()">
                                <label for="childrenCustom">Different amounts to each child</label>
                            </div>
                        </div>

                        <!-- Custom Child Shares -->
                        <div id="customChildSharesGroup" style="display: none; margin-top: 15px;">
                            <label>Specify percentage for each child:</label>
                            <div id="childSharesList">
                                <!-- Will be populated by JavaScript -->
                            </div>
                            <small>Child percentages must total the remaining amount</small>
                        </div>

                        <!-- Trust Options -->
                        <div id="trustOptionsGroup" style="margin-top: 15px;">
                            <label>How should your children receive their inheritance? *</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="distributionOutright" name="distributionType" value="outright" onchange="hideTrustDetails()">
                                    <label for="distributionOutright">Outright distribution (no trust)</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="distributionTrust" name="distributionType" value="trust" onchange="showTrustDetails()">
                                    <label for="distributionTrust">In trust</label>
                                </div>
                            </div>

                            <!-- Trust Details -->
                            <div id="trustDetailsGroup" style="display: none; margin-top: 10px;">
                                <div class="form-group">
                                    <label for="trustAge">At what age should the trust end? *</label>
                                    <input type="number" id="trustAge" name="trustAge" min="18" max="50" placeholder="25">
                                    <small>Enter age between 18 and 50</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charity Details -->
                    <div class="form-group" id="charityDetailsGroup" style="display: none;">
                        <h4>Charitable Organizations</h4>
                        <div id="charitiesList">
                            <div class="charity-entry">
                                <h4>Charity #1</h4>
                                <div class="form-group">
                                    <label for="charity1Name">Charity Name *</label>
                                    <input type="text" id="charity1Name" name="charityName[]" placeholder="Full legal name of charity">
                                </div>
                                <div class="form-group">
                                    <label for="charity1Percentage">Percentage *</label>
                                    <input type="number" id="charity1Percentage" name="charityPercentage[]" min="1" max="100" placeholder="50" step="1" onchange="validateCharityPercentages()">
                                    <span>%</span>
                                </div>
                            </div>
                        </div>
                        <button type="button" onclick="addCharity()" class="add-btn">Add Another Charity</button>
                        <small>Charity percentages must add up to 100% (or the remaining amount if partial spouse)</small>
                    </div>

                    <!-- Other Persons Details -->
                    <div class="form-group" id="otherPersonsDetailsGroup" style="display: none;">
                        <h4>Other Persons</h4>
                        <div id="otherPersonsList">
                            <div class="other-person-entry">
                                <h4>Person #1</h4>
                                <div class="form-group">
                                    <label for="otherPerson1Name">Full Name *</label>
                                    <input type="text" id="otherPerson1Name" name="otherPersonName[]" placeholder="Full legal name">
                                </div>
                                <div class="form-group">
                                    <label for="otherPerson1Percentage">Percentage *</label>
                                    <input type="number" id="otherPerson1Percentage" name="otherPersonPercentage[]" min="1" max="100" placeholder="50" step="1" onchange="validateOtherPersonsPercentages()">
                                    <span>%</span>
                                </div>
                                <div class="form-group">
                                    <label for="otherPerson1Alternate">If this person doesn't survive me, give their share to:</label>
                                    <input type="text" id="otherPerson1Alternate" name="otherPersonAlternate[]" placeholder="Name of alternate beneficiary (optional)">
                                </div>
                            </div>
                        </div>
                        <button type="button" onclick="addOtherPerson()" class="add-btn">Add Another Person</button>
                        <small>Person percentages must add up to 100% (or the remaining amount if partial spouse)</small>
                    </div>

                    <!-- Multiple Distribution Details -->
                    <div class="form-group" id="multipleDistributionGroup" style="display: none;">
                        <h4>Multiple Distribution Details</h4>
                        <p>Specify how the <span id="multipleRemainingAmount">25</span>% should be split:</p>
                        
                        <div id="multipleDistributionOptions">
                            <!-- Children Option -->
                            <div class="form-group" id="multipleChildrenOption" style="display: none;">
                                <label>
                                    <input type="checkbox" id="multipleChildren" name="multipleDistribution" value="children" onchange="toggleMultipleChildrenDetails()">
                                    Children
                                </label>
                                <div id="multipleChildrenPercentage" style="display: none; margin-left: 25px; margin-top: 5px;">
                                    <label for="childrenMultiplePercent">Percentage to children:</label>
                                    <input type="number" id="childrenMultiplePercent" name="childrenMultiplePercent" min="1" max="100" placeholder="15" onchange="validateMultipleDistribution()">
                                    <span>%</span>
                                </div>
                            </div>

                            <!-- Charity Option -->
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="multipleCharity" name="multipleDistribution" value="charity" onchange="toggleMultipleCharityDetails()">
                                    Charitable organizations
                                </label>
                                <div id="multipleCharityPercentage" style="display: none; margin-left: 25px; margin-top: 5px;">
                                    <label for="charityMultiplePercent">Percentage to charities:</label>
                                    <input type="number" id="charityMultiplePercent" name="charityMultiplePercent" min="1" max="100" placeholder="10" onchange="validateMultipleDistribution()">
                                    <span>%</span>
                                </div>
                            </div>

                            <!-- Other Persons Option -->
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="multipleOtherPersons" name="multipleDistribution" value="otherPersons" onchange="toggleMultipleOtherPersonsDetails()">
                                    Other persons
                                </label>
                                <div id="multipleOtherPersonsPercentage" style="display: none; margin-left: 25px; margin-top: 5px;">
                                    <label for="otherPersonsMultiplePercent">Percentage to other persons:</label>
                                    <input type="number" id="otherPersonsMultiplePercent" name="otherPersonsMultiplePercent" min="1" max="100" placeholder="5" onchange="validateMultipleDistribution()">
                                    <span>%</span>
                                </div>
                            </div>
                        </div>

                        <div id="multipleDistributionValidation" style="margin-top: 10px; color: red; display: none;"></div>
                    </div>
                </div>

                <!-- Alternative Beneficiaries Section -->
                <div class="form-section" id="alternativeBeneficiariesSection" style="display: none;">
                    <h3>Alternative Beneficiaries</h3>
                    <p>If your primary beneficiaries cannot inherit, who should receive your estate instead?</p>
                    
                    <div class="form-group">
                        <label>Alternative Beneficiaries *</label>
                        <div class="radio-group" id="alternativeOptionsGroup">
                            <!-- Options will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Alternative Charity Details -->
                    <div class="form-group" id="alternativeCharityDetailsGroup" style="display: none;">
                        <label>Alternative Charitable Organizations:</label>
                        <div id="alternativeCharitiesList">
                            <div class="charity-entry">
                                <h4>Alternative Charity #1</h4>
                                <div class="form-group">
                                    <label for="altCharity1Name">Charity Name *</label>
                                    <input type="text" id="altCharity1Name" name="altCharityName[]" placeholder="Full legal name of charity">
                                </div>
                                <div class="form-group">
                                    <label for="altCharity1Percentage">Percentage *</label>
                                    <input type="number" id="altCharity1Percentage" name="altCharityPercentage[]" min="1" max="100" placeholder="50" step="1">
                                    <span>%</span>
                                </div>
                            </div>
                        </div>
                        <button type="button" onclick="addAlternativeCharity()" class="add-btn">Add Another Charity</button>
                        <small>Percentages must add up to 100%</small>
                    </div>

                    <!-- Alternative Other Persons Details -->
                    <div class="form-group" id="alternativeOtherPersonsDetailsGroup" style="display: none;">
                        <label>Alternative Other Persons:</label>
                        <div id="alternativeOtherPersonsList">
                            <div class="other-person-entry">
                                <h4>Alternative Person #1</h4>
                                <div class="form-group">
                                    <label for="altOtherPerson1Name">Full Name *</label>
                                    <input type="text" id="altOtherPerson1Name" name="altOtherPersonName[]" placeholder="Full legal name">
                                </div>
                                <div class="form-group">
                                    <label for="altOtherPerson1Percentage">Percentage *</label>
                                    <input type="number" id="altOtherPerson1Percentage" name="altOtherPersonPercentage[]" min="1" max="100" placeholder="50" step="1">
                                    <span>%</span>
                                </div>
                                <div class="form-group">
                                    <label for="altOtherPerson1Alternate">If this person doesn't survive me, give their share to:</label>
                                    <input type="text" id="altOtherPerson1Alternate" name="altOtherPersonAlternate[]" placeholder="Name of alternate beneficiary (optional)">
                                </div>
                            </div>
                        </div>
                        <button type="button" onclick="addAlternativeOtherPerson()" class="add-btn">Add Another Person</button>
                        <small>Percentages must add up to 100%</small>
                    </div>
                </div>

                <!-- Summary Section -->
                <div class="form-section" id="distributionSummary" style="display: none;">
                    <h3>Distribution Summary</h3>
                    <div id="summaryContent">
                        <!-- Summary will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Navigation -->
                <div class="form-navigation">
                    <button type="submit" class="submit-btn">Save & Continue to Executors ‚Üí</button>
                </div>
            </form>

            <!-- Messages -->
            <div id="loadingMessage" class="message loading-message" style="display: none;">
                <p>Saving your estate distribution preferences...</p>
            </div>

            <div id="successMessage" class="message success-message" style="display: none;">
                <p>‚úÖ Estate distribution saved successfully!</p>
                <button onclick="continueToExecutors()" class="continue-btn">Continue to Executors ‚Üí</button>
            </div>

            <div id="errorMessage" class="message error-message" style="display: none;">
                <p>‚ùå There was an error saving your information. Please try again.</p>
            </div>
        </div>
    </div>

    <script src="js/remaining-estate.js"></script>
</body>
</html>
